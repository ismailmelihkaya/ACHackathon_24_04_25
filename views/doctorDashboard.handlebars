<h2>Merhaba, {{doctorName}}.Hastalarınızın Randevuları</h2>
<input type="text" style="width: 14%" id="filterInput" placeholder="Hasta adı veya tarih girin..." onkeyup="filterDoctorAppointments()" />

{{#if appointments.length}}
    <table id="doctorAppointmentsTable" border="1">
        <thead>
            <tr>
                <th>Hasta</th>
                <th>Tarih</th>
                <th>Durum</th>
                <th>Not</th>
                <th>Onayla</th>
            </tr>
        </thead>
        <tbody>
            {{#each appointments}}
                <tr>
                    <td>{{user_name}}</td>
                    <td>{{datetime}}</td>
                    <td>{{status}}</td>
                    <td>{{notes}}</td>
                    <td>
                        {{#eq status "pending"}} 
                            <form action="/auth/doctor/appointment/approve/{{id}}" method="POST">
                                <button type="submit">Onayla</button>
                            </form>
                        {{/eq}}
                    </td>
                </tr>
            {{/each}}
        </tbody>
    </table>
{{else}}
    <p>Henüz bir randevu yok.</p>
{{/if}}

<script>
  function filterDoctorAppointments() {
    const input = document.getElementById("filterInput").value.toLowerCase();
    const rows = document.querySelectorAll("#doctorAppointmentsTable tbody tr");

    rows.forEach(row => {
      const patient = row.cells[0].textContent.toLowerCase();
      const date = row.cells[1].textContent.toLowerCase();

      if (patient.includes(input) || date.includes(input)) {
        row.style.display = "";
      } else {
        row.style.display = "none";
      }
    });
  }
</script>

<a href="/auth/logout"><button>Çıkış Yap</button></a>